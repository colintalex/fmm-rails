<!DOCTYPE html>
<html>
  <head>
    <title>FmmRails</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-visit-control" content="reload">

    <%= csp_meta_tag %>
    <%= csrf_meta_tags %>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""/>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>

    <%= javascript_importmap_tags %>
    <%= yield :head %>
  </head>

  <body class="<%= controller_name %>" id="<%= action_name %>">
    <nav>
      <% if current_user.present? %>
        Welcome, <%= current_user.name %>!
        <%= button_to 'LogOut', '/logout', method: :post %>
        <% if controller_name == 'maps' %>
          <%= link_to 'Profile', "/user/#{current_user.id}" %>
        <% elsif controller_name == 'users' %>
          <%= link_to 'Map', '/map' %>
        <% end %>
      <% end %>
    </nav>
    <% flash.each do |name, msg| %>
      <%= content_tag :div, msg, class: name %>
    <% end %>

    <%= yield %>
  </body>
</html>
